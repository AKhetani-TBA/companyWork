@model  EMS_BASE.Models.DocumentUploadAdminBase
@using System.Data;

@{
    ViewBag.Title = "DocumentUploadAdmin";
    Layout = "~/Views/Shared/_HRLayout.cshtml";
        //IEnumerable<EMS_BASE.Models.DocumentUploadSetDataBase> DataViews = ViewData["DataViews"] as IEnumerable<EMS_BASE.Models.DocumentUploadSetDataBase>;
    
}


<div class="boxMainHldr marginBottom_30 cf">
    @using (Html.BeginForm("UpdateData", "DocumentUploadAdmin", FormMethod.Post, new { @class = "form-horizontal" }))
    {
        <div class="boxTitle">
            <i class="fa fa-users"></i>Sections & Exemptions<div style='float: right;'><b>Date: </b>@ViewBag.Date <b>Time: </b>
                <class id="time">
            </div>
        </div>
@*<form class="form-horizontal">*@
        <div class="boxBody">
            <div class="row">
                <div class="col-lg-4 col-md-4 col-sm-4">
                    <div class="form-group">
                        <label class="col-sm-4 control-label" for="inputEmail3">FY</label>
                        <div class="col-sm-8">
                            @Html.DropDownList("FY", (IEnumerable<SelectListItem>)ViewBag.GetYear)
                        </div>
                    </div>
                </div>

                <div class="col-lg-4 col-md-4 col-sm-4">
                    <div class="form-group">
                        <label class="col-sm-4 control-label" for="inputEmail3">WEF</label>
                        <div class="col-sm-8">
                            <div class="input-group date" id="birthDate">
                                @Html.TextBoxFor(Model => Model.WEF, new { Value = ViewBag.Date })
                                <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-4 col-md-4 col-sm-4">
                    <div class="form-group">
                        <label class="col-sm-4 control-label" for="inputEmail3">Sections</label>
                        <div class="col-sm-8">
                            @Html.TextBox("Section", null)
                            @Html.ValidationMessageFor(m => m.Section, "", new { @style = "color:red" })
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-lg-4 col-md-4 col-sm-4">
                    <div class="form-group">
                        <label class="col-sm-4 control-label" for="inputEmail3">Head</label>
                        <div class="col-sm-8">
                            @Html.TextBox("Head", null)
                            @Html.ValidationMessageFor(m => m.Head, "", new { @style = "color:red" })
                        </div>
                    </div>
                </div>

                <div class="col-lg-4 col-md-4 col-sm-4">
                    <div class="form-group">
                        <label class="col-sm-4 control-label" for="inputEmail3">Abrevation</label>
                        <div class="col-sm-8">
                            @Html.TextBox("Abrevation", null)
                            @Html.ValidationMessageFor(m => m.Abrevation, "", new { @style = "color:red" })
                        </div>
                    </div>
                </div>

                <div class="col-lg-4 col-md-4 col-sm-4">
                    <div class="form-group">
                        <label class="col-sm-4 control-label" for="inputEmail3">Basis</label>
                        <div class="col-sm-8">
                            @Html.TextBox("Basis", null)
                            @Html.ValidationMessageFor(m => m.Basis, "", new { @style = "color:red" })
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-lg-4 col-md-4 col-sm-4">
                    <div class="form-group">
                        <label class="col-sm-4 control-label" for="inputEmail3">Minimum</label>
                        <div class="col-sm-8">
                            @Html.TextBox("Minimum", null)
                            @Html.ValidationMessageFor(m => m.Minimum, "", new { @style = "color:red" })
                        </div>
                    </div>
                </div>

                <div class="col-lg-4 col-md-4 col-sm-4">
                    <div class="form-group">
                        <label class="col-sm-4 control-label" for="inputEmail3">Maximum</label>
                        <div class="col-sm-8">
                            @Html.TextBox("Maximum", null)
                            @Html.ValidationMessageFor(m => m.Maximum, "", new { @style = "color:red" })
                        </div>
                    </div>
                </div>

                <div class="col-lg-4 col-md-4 col-sm-4">
                    <div class="form-group">
                        <label class="col-sm-4 control-label" for="inputEmail3">Remarks</label>
                        <div class="col-sm-8">
                            @Html.TextBox("Remarks", null)
                            @Html.ValidationMessageFor(m => m.Remarks, "", new { @style = "color:red" })
                        </div>
                    </div>
                </div>
            </div>
            @ViewBag.Result
        </div>

        <div class="boxFooter">
            @*<button class="btn btn-primary" type="submit">Save</button>*@
            <input class="btn btn-primary" type="submit" value="Save" id="btnSave" />
            <button class="btn btn-default" type="button" onclick="uploadForm.reset();return false;">Cancel</button>
        </div>
@*</form>*@
    }
</div>
<br />

<div class="boxMainHldr marginBottom_30 cf">
    <div class="boxTitle">
        <i class="fa fa-users"></i>Previous Details
            <class id="time">
    </div>
    <div class="boxBody">
        <div class="row">
            <div class="col-lg-4 col-md-4 col-sm-4">
                <div class="form-group">
                    <label class="col-sm-4 control-label" for="inputEmail3">FY</label>
                    <div class="col-sm-8">
                        @Html.DropDownList("FY", (IEnumerable<SelectListItem>)ViewBag.GetYear)
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<br />
<div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12">
        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12">
                <table id="tblRoleDetails" class="table table-striped table-bordered" cellspacing="0" data-page-length='10'>
                    <thead>
                        <tr>
                            <th>Section</th>
                            <th>Head</th>
                            <th>Basis</th>
                            <th>Minimum</th>
                            <th>Maximum</th>
                            <th>WEF</th>
                            @*<th>Edit</th>*@
                            <th>Delete</th>
                        </tr>
                    </thead>
                </table>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="delete" tabindex="-1" role="dialog" aria-labelledby="edit" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>
                <h4 class="modal-title custom_align" id="Heading">Delete this entry</h4>
            </div>
            <div class="modal-body">

                <div class="alert alert-danger"><span class="glyphicon glyphicon-warning-sign"></span>Are you sure you want to delete this Record?</div>

            </div>
            <div class="modal-footer ">
                <button type="button" class="btn btn-success"><span class="glyphicon glyphicon-ok-sign"></span>Yes</button>
                <button type="button" class="btn btn-default" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span>No</button>
            </div>
        </div>
    </div>
</div>


@section MyScripts {
    @*    <script src="http://getbootstrap.com/dist/js/bootstrap.min.js"></script>
    <script src="@Url.Content("https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js")"></script>*@
    <script src="@Url.Content("https://cdn.datatables.net/1.10.12/js/jquery.dataTables.min.js")"></script>
    <script src="@Url.Content("https://cdn.datatables.net/1.10.12/js/dataTables.bootstrap.min.js")"></script>
    <script src="~/Scripts/moment.js"></script>
    <script type="text/javascript">

        $(document).ready(function () {
            debugger;
            var table = $('#tblRoleDetails').DataTable({
                "searching": true,
                "ordering": true,
                "pagingType": "full_numbers",
                "ajax": '@Url.Action("GetDocData", "DocumentUploadAdmin")',
                "columns": [
                    { "data": "Section" },
                    { "data": "Head" },
                    { "data": "Basis" },
                    { "data": "Minimum" },
                    { "data": "Maximum" },
                    { "data": "WEF" },
                    //{ "defaultContent": "<button class='btn btn-primary btn-xs' data-title='Edit' data-toggle='modal' data-target='#edit' ><span class='glyphicon glyphicon-pencil'></span></button>" },
                    { "defaultContent": "<button class='btn btn-danger btn-xs' data-title='Dekete' data-toggle='modal' data-target='#delete' ><span class='glyphicon glyphicon-trash'></span></button>" },

                    //{ "defaultContent": "<p data-placement='top' data-toggle='tooltip' title='Edit'><button class='btn btn-primary btn-xs' data-title='Edit' data-toggle='modal' data-target='#edit' ><span class='glyphicon glyphicon-pencil'></span></button></p>" },
                    //{ "defaultContent": "<p data-placement='top' data-toggle='tooltip' title='Delete'><button class='btn btn-danger btn-xs' data-title='Dekete' data-toggle='modal' data-target='#delete' ><span class='glyphicon glyphicon-trash'></span></button></p>" },
                    //{ "defaultContent": "<button>Edit</button>" },
                    //{ "defaultContent": "<button>Delete</button>" }
                ]
            });

            //$('#tblRoleDetails tbody').on('click', 'button', function () {
            //    var data = table.row($(this).parents('tr')).data();
            //    alert("RoleId is: " + data["RoleId"]);
            //});
        });


    </script>
}

<script>
    function DeleteUsers(bID) {
        var result = confirm("Are you Sure you Want to Delete Selected Record? : " + bID);
        if (result) {
            var data = bID;
            $.ajax({
                type: 'post',
                dataType: 'json',
                url: 'DeleteDetails',
                data: { "json": JSON.stringify(data) },
                success: function (json) {
                    if (json) {
                        alert('ok');
                    } else {
                        alert('failed');
                    }
                },
            })
        }
    }

    function checkTime(i) {
        if (i < 10) {
            i = "0" + i;
        }
        return i;
    }

    function startTime() {
        var today = new Date();
        var h = today.getHours();
        var m = today.getMinutes();
        var s = today.getSeconds();
        // add a zero in front of numbers<10
        m = checkTime(m);
        s = checkTime(s);
        document.getElementById('time').innerHTML = h + ":" + m + ":" + s;
        t = setTimeout(function () {
            startTime()
        }, 500);
    }
    startTime();
</script>
